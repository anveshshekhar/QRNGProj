\# ESP32 Quantum-Thermal Random Number Generator (QRNG)



This project implements a True Random Number Generator (TRNG) using the ESP32 microcontroller. Unlike standard pseudo-random number generators (PRNGs) which rely on deterministic mathematical formulas, this system harvests entropy from physical phenomena: the thermal agitation of electrons (Johnson-Nyquist noise) within the silicon of the ADC.



The system visualizes the entropy stream in real-time on a TFT display and performs on-chip statistical analysis to verify the quality of randomness.



\## Theory of Operation



The generation of random numbers proceeds in three stages:



1\.  \*\*Entropy Harvesting (Johnson-Nyquist Noise):\*\*

&nbsp;   A floating GPIO pin (GPIO 34) acts as a high-impedance antenna. While it picks up classical electromagnetic interference (mains hum, WiFi), the \*\*Least Significant Bit (LSB)\*\* of the analog reading is dominated by thermal shot noise. This noise is caused by the quantum scattering of electrons against atoms in the semiconductor lattice.



2\.  \*\*LSB Extraction:\*\*

&nbsp;   The system discards the upper 11 bits of the 12-bit ADC reading, isolating only the fluctuating LSB. This filters out the deterministic "signal" (radio waves) and keeps the "noise" (thermal entropy).



3\.  \*\*Von Neumann Whitening:\*\*

&nbsp;   Raw hardware entropy often suffers from bias (e.g., more 0s than 1s due to ADC dead zones or DC offset). This project implements the Von Neumann Whitening algorithm to mathematically debias the stream:

&nbsp;   \* Read bits in non-overlapping pairs.

&nbsp;   \* Input `01` -> Output `0`.

&nbsp;   \* Input `10` -> Output `1`.

&nbsp;   \* Input `00` or `11` -> Discard.

&nbsp;   This guarantees a uniform distribution (50% probability for 0 and 1).



\## Hardware Requirements



\* \*\*ESP32 Development Board\*\* (Doit DevKit V1 or similar).

\* \*\*ILI9225 TFT Display\*\* (2.2-inch SPI module).

\* \*\*Jumper Wire:\*\* A single wire connected to the entropy pin, left floating at the other end.



\## Pin Configuration



| Component | ESP32 Pin | Function |

| :--- | :--- | :--- |

| \*\*Entropy Source\*\* | GPIO 34 | Analog Input (Must be floating) |

| \*\*Pause Button\*\* | GPIO 0 | Built-in BOOT button |

| \*\*Display CLK\*\* | GPIO 18 | SPI Clock |

| \*\*Display SDI\*\* | GPIO 23 | SPI MOSI |

| \*\*Display RS\*\* | GPIO 2 | Register Select |

| \*\*Display RST\*\* | GPIO 4 | Reset |

| \*\*Display CS\*\* | GPIO 5 | Chip Select |



\## Installation



1\.  \*\*Dependencies:\*\*

&nbsp;   Install the following library via the Arduino IDE Library Manager:

&nbsp;   \* `TFT\_22\_ILI9225`



2\.  \*\*Upload:\*\*

&nbsp;   \* Select your ESP32 board in the Arduino IDE.

&nbsp;   \* Compile and upload the firmware.



\## Usage



\### The Display Interface

\* \*\*8-BIT BINARY:\*\* Shows the raw binary representation of the latest generated byte.

\* \*\*DECIMAL:\*\* Shows the integer value (1-255).

\* \*\*GRAPH:\*\* A real-time scrolling plot of the generated values. High vertical variance indicates good entropy.

\* \*\*STATUS:\*\* Indicates if the generator is `RUNNING` or `PAUSED`.



\### Statistical Metrics

The system calculates statistics in batches of 100 samples to verify randomness quality:

\* \*\*Mean:\*\* The average value of the generated numbers. For a perfect uniform distribution (0-255), this should approach \*\*127.5\*\*.

\* \*\*Var (Variance):\*\* Measures the spread of the data. High variance (~5000+) indicates the numbers are using the full range of the byte. Low variance implies the generator is stuck or biased.



\### Controls

\* \*\*Pause/Resume:\*\* Press the \*\*BOOT\*\* button on the ESP32 to freeze the generation and graph. This allows for inspection of specific noise events.



\## Statistical Validation



The raw ADC data typically exhibits a strong bias toward 0 (Mean ~55). With the implementation of LSB extraction and Von Neumann Whitening, the output stabilizes to:

\* \*\*Mean:\*\* ~127.5 (+/- 5%)

\* \*\*Variance:\*\* ~5400

\* \*\*Bias:\*\* Negligible



\## License



This project is open-source.

